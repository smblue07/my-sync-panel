{% extends "base.html" %}
{% block title %}Add New Client{% endblock %}
{% block content %}
<style>
    .add-panel { max-width: 900px; margin: 0 auto; background: #fff; padding: 25px 30px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
    h2 { margin-top: 0; }
    .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    .form-group { display: flex; flex-direction: column; }
    .form-group label { margin-bottom: 8px; font-weight: 500; }
    .form-group input { padding: 10px; border: 1px solid #ccc; border-radius: 8px; }
    .full-width { grid-column: span 2; }
    .inbound-list { max-height: 150px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; border-radius: 8px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    .btn-add { border: none; padding: 12px 20px; font-size: 15px; font-weight: 500; border-radius: 8px; cursor: pointer; color: white; background-color: #3498db; width: 100%; margin-top: 15px; }
</style>
<div class="add-panel">
    <h2>Add New Client</h2>
    <form action="{{ url_for('add_client') }}" method="post">
        <div class="form-grid">
            <div class="form-group">
                <label for="email">Client Email/Remark</label>
                <input type="text" id="email" name="email" required>
            </div>
            <div class="form-group">
                <label for="sub_id">Subscription ID (subId)</label>
                <input type="text" id="sub_id" name="sub_id" placeholder="e.g., new_group_name">
            </div>
            <div class="form-group">
                <label for="total_gb">Traffic Limit (GB)</label>
                <input type="number" id="total_gb" name="total_gb" value="0" min="0">
            </div>
            <div class="form-group">
                <label for="expiry_days">Expiry (in days from now)</label>
                <input type="number" id="expiry_days" name="expiry_days" value="0" min="0">
            </div>
            <div class="form-group full-width">
                <label>Add to Inbounds</label>
                <div class="inbound-list">
                    {% for inbound in all_inbounds %}
                    <div>
                        <input type="checkbox" name="inbounds" value="{{ inbound.id }}" id="inbound-{{ inbound.id }}">
                        <label for="inbound-{{ inbound.id }}">{{ inbound.remark or "Untitled" }} ({{ inbound.protocol }} / {{ inbound.port }})</label>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <button type="submit" class="btn btn-add">Add Client</button>
    </form>
</div>
{% endblock %}
